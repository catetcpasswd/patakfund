extends ../layouts/default

block head
  title Profile

block neck
    link(rel='stylesheet', href='/css/contact.css') 

block feet

block content
  // init window.user for menu to work properly

  script(type="text/javascript").
   window.user = !{JSON.stringify(user)};

  // this function overrides the ng-view function
  // when clicking on this while logged in
  // routeProvider no longers work

  // have to click home to reinit ng-view

  
  div.container
    div(data-ng-controller="ProfileFormController", data-ng-init="getProfile()")

      div.col-sm-4
        div.container
          div.row

            br
            br
            div.panel.panel-default
              div.panel-body
                h3  {{global.user.name}}
                p View my profile page
          div.row
         
             ul.nav.nav-pills.nav-stacked
                li.active
                  a(href='/account') Account
                li.divider
                li
                  a(href='/profile') Profile
                li.divider
                li
                  a(href='/resetpassword') Password 
                li.divider
                li
                  a(href='/mobile') Mobile
                li.divider
                li
                  a(href='/picture') Upload Pictures
                li.divider

      div.col-sm-8.special 
        div.container
          //moved so {{user.name}} will appear 
          div.row
            br
            br
            div.panel.panel-default
              div.panel-body
                h3 Profile 
                .container
                  form.form-horizontal(name="form", method="post",  novalidate, enctype="multipart/form-data")
                    input(type='hidden', name = '_csrf', value = token)

                    div.form-group
                      label.col-sm-2.control-label(for="name") Name:
                      .col-sm-6
                      input.form-control(type="text", name="name", id="name",  required, ng-model="profile.name", required, autofocus)
                      span.help-block(ng-show="form.username.$dirty && form.username.$error.required") Please enter your full name

                    div.form-group
                      label.col-sm-2.control-label(for="birthdate") BirthDate:
                      .col-sm-6 
                      <pre>Selected: {{profile.birthdate|json}}</pre>

                      // took out ui-date-format. now initial value is displayed
                      // see profileFormController, set the profile.birthdate to new Date

                      input(style="width:100px",  name = "birthdate", ui-date='dateOptions', ng-model='profile.birthdate', data-placeholder='Enter Birthdate')

                    div.form-group
                      label.col-sm-2.control-label(for="name") Location:
                      .col-sm-6
                      input.form-control(type="text", name="name", id="name", ng-model="profile.location", autofocus)

                    div.form-group
                      label.col-sm-2.control-label(for="website") Website:
                      .col-sm-6
                      input.form-control(type="url", name="website", id="website", ng-model="profile.website", autofocus)

                    div.form-group
                      label.col-sm-2.control-label(for="name") Bio:
                      .col-sm-6
                      textarea.form-control(rows='3', name="bio", id="bio", ng-model="profile.bio", autofocus)

                    hr   
  
                    if error
                        div.alert #{error}
                    input.btn.btn-primary(type="submit", value="Save Changes",data-ng-click="updateProfile()", ng-disabled="form.$invalid", ng-disabled="$isUploading")
           
           

